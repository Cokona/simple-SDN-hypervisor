from ryu.lib.packet import packet, openflow
# fromryu.ofproto.ofproto_v1_3_parser
import array

# Hello
# data = b"\x04\x00\x00\x08\x00\x00\x00\x4d"
# Features Request
# data = b"\x04\x05\x00\x08\xe6\x4b\xe3\x59"
# Flow Mod
# data = b"\x04\x0e\x00\x50\x40\x9b\x4d\x86\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\xff\xff\xff\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x04\x00\x00\x00\x00\x00\x04\x00\x18\x00\x00\x00\x00\x00\x00\x00\x10\xff\xff\xff\xfd\xff\xff\x00\x00\x00\x00\x00\x00"
# PacketIN
# data = b"\x04\x0a\x00\x84\x00\x00\x00\x00\x00\x00\x01\x00\x00\x5a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x0c\x80\x00\x00\x04\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\x33\x33\x00\x00\x00\x16\x22\xb5\x46\x38\xec\xb3\x86\xdd\x60\x00\x00\x00\x00\x24\x00\x01\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xff\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x16\x3a\x00\x05\x02\x00\x00\x01\x00\x8f\x00\x82\x9e\x00\x00\x00\x01\x04\x00\x00\x00\xff\x02\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\xff\x38\xec\xb3"

# PACKET IN of ping message
data = b"\x04\x0a\x00\x54\x00\x00\x00\x00\x00\x00\x01\x3f\x00\x2a\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x0c\x80\x00\x00\x04\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00\xaa\xaa\xaa\xaa\xaa\x02\xaa\xaa\xaa\xaa\xaa\x04\x08\x06\x00\x01\x08\x00\x06\x04\x00\x02\xaa\xaa\xaa\xaa\xaa\x04\x14\x00\x00\x04\xaa\xaa\xaa\xaa\xaa\x02\x14\x00\x00\x02"


# msg = packet.Packet(data)
# for p in msg.protocols:
#     print (str(p))

msg = openflow.openflow.parser(data)

# print(msg[0].__dict__)
# print(msg[0].msg.data)
msg_data = packet.Packet(msg[0].msg.data)
print(msg_data)
